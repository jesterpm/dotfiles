#
# Mutt settings common everywhere
#

# Mailbox Settings
set mbox_type="Maildir"
set folder="~/.maildir"

# Mutt settings
set header_cache=~/.maildir/mutt_cache/
set delete=yes
unset confirmappend
set sort=threads
set sort_aux = last-date-received
set pager_stop=yes
set mark_old = no
unset markers
set text_flowed=yes
set display_filter="~/bin/mutt-display-filter.sh"
auto_view text/html
alternative_order text/plain text/enriched text/html

# Headers
ignore *
unignore date from: to: cc subject X-Spam-Status
set forward_format="Fwd: %s"

# Macros
macro pager <Up> "<previous-line>" "Previous line"
macro pager <Down> "<next-line>" "Next line"

bind index g        noop
bind index gg       first-entry
bind index G        last-entry
bind index R        group-reply
macro index c "<change-folder>?<toggle-mailboxes>" "open a different folder"
macro pager c "<change-folder>?<toggle-mailboxes>" "open a different folder"
macro index C "<copy-message>?<toggle-mailboxes>" "copy a message to a mailbox"
macro index M "<save-message>?<toggle-mailboxes>" "move a message to a mailbox"
# For gmail, don't move the message to archive, just remove it from the inbox.
#macro index e "<save-message>+archive<enter>" "Archive a message."
#macro pager e "<save-message>+archive<enter>" "Archive a message."
macro index e "<delete-message>" "Archive a message."
macro pager e "<delete-message>" "Archive a message."
macro index S "<save-message>+spam<enter>" "Report message as spam."
macro index d "<save-message>+trash<enter>" "Move to trash"
macro pager d "<save-message>+trash<enter>" "Move to trash"
macro pager \Cu "|urlview<enter>" "view links in urlview"

macro index \es "<enter-command>unset wait_key<enter><shell-escape>notmuch-mutt --prompt search<enter><change-folder-readonly>~/.cache/notmuch/mutt/results/<enter>" "Search All Mail"

# Colors
#color index brightwhite default ~N 
#color index brightwhite default ~O
#
## colors
#color normal	white black
#color attachment brightyellow black
#color hdrdefault white black
#color indicator black white
#color markers	brightred black
#color quoted	green black
#color signature cyan black
#color status	black white
#color tilde	blue black
#color tree	red black

# Grab any host-specific settings
source ~/.host-specific/muttrc

source ~/.mutt/aliases
